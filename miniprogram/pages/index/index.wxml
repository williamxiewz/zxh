<!--index.wxml-->
<view class="container">
  <view class="container-r" style="width:100%;display: block;">
    <image src="../../images/ctrl_bg.png" style="position:absolute;width:100%;" mode="widthFix"></image>
    <!-- 标题栏 -->
    <view class="container-h" style="width:100%;height:96rpx;align-items:center;position: absolute;">
      <image src="{{bluetoothAvailable? '../../images/ic_bluetooth_blue.png':'../../images/ic_bluetooth_red.png'}}" style="height:50rpx;margin-left:20rpx;" mode="heightFix"></image>
      <view style="flex:1;"></view>
      <!-- 173 * 38 -->
      <image src="../../images/logo.png" style="height: 85rpx;width: 283rpx;"></image>
      <view style="flex:1;"></view>
      <image src="../../images/ic_scancode.png" style="height:50rpx;margin-right:20rpx;" mode="heightFix" bindtap="scanCode"></image>
      <image src="{{RSSI_Image}}" style="height:30rpx;margin-right:20rpx;display: none;" mode="heightFix"></image>
    </view>
    <!-- 电车背景图片 -->
    <image src="../../images/{{connected?'bg_connected':'bg_disconnected'}}.png" style="position:absolute;width:64%;margin-top:85rpx;margin-left:244px;" mode="widthFix"/>
    <!-- logo图标 460 * 500  bindtap="onGanyingCheckChange" -->
    <image src="../../images/{{connected?'large_logo_connected':'large_logo_gray'}}.png" style="position:absolute;width:58%;margin-top: 150rpx;" mode="widthFix"></image>
    <!-- 白色背景 -->
    <view class="container-v bottom_bg" style="position:absolute;height: 200rpx;margin-top:670rpx;margin-left: 2.5%;"></view>
    <!-- 电车图片 -->
    <image src="../../images/img_moto_normal.png" style="position:absolute;width:68%;margin-top:185rpx;margin-left:122px;" mode="widthFix"/>

    <!-- 调试不同连接状态下的UI -->
    <!-- <switch type="swtich" checked="{{connected}}" bindchange="testConnectionState">连接状态模拟</switch> -->
    <!-- 白色背景 -->
    <view class="container-v bottom_bg" style="position:absolute;height: 700rpx;margin-top:840rpx;margin-left: 2.5%;"></view>

    <!-- 启动按钮 -->
    <view class="container-r" style="margin-top: 900rpx;z-index: 2;">
      <!-- <image src="{{connected? '../../images/btn_start_bg.png' : '../../images/btn_start_bg_disabled.png'}}" style="position: absolute;width: 96%;" mode="widthFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="0"></image>
      <view class="container-h" style="position: absolute;align-items: center;" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="0">
        <image src="{{connected && selectedBtn === 0 ? '../../images/btn_start_active.png':'../../images/btn_start.png'}}" style="width: 45rpx;height: 48rpx;"></image>
        <text style="margin-left: 30rpx;color: {{connected && selectedBtn === 0 ? 'red':'black'}};">START | 开启</text>
      </view> -->
      <swipe-button style="width: 80%;position: absolute;" bindvaluechange="onStartValueChange" 
      enabled="{{connected}}" on="{{connected&&selectedBtn==0}}"></swipe-button>
    </view>

    <view class="container-v" style="margin-top: 160rpx;z-index: 2;">
      <!-- iOS margin-top 不好使，这里使用View填充一下 -->
      <view wx:if="{{platform=='ios'}}" style="height: 160rpx;width: 100%;"></view>
      <!-- 未连接设备时的4个功能按键 -->
      <view class="container-r" style="display:{{connected? 'none':'flex'}};">
        <view class="container-h bottom_bg" style="position: absolute;">
          <!-- <view style="flex: 0.5;"></view> -->
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" /> -->
            <image src="../../images/btn_lock_disabled.png" class="btn_nor" mode="heightFix" />
          </view>
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" /> -->
            <image src="../../images/btn_unlock_disabled.png" class="btn_nor" mode="heightFix" />
          </view>
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" /> -->
            <image src="../../images/{{is_kzb?'btn_kzb_disabled':'btn_call_disabled'}}.png" class="btn_nor" mode="heightFix" />
          </view>
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" /> -->
            <image src="../../images/btn_mute_disabled.png" class="btn_nor" mode="heightFix" />
          </view>
          <!-- <view style="flex: 0.5;"></view> -->
        </view>
      </view>
      <!-- 连接设备时的五个功能按键 -->
      <view class="container-r" style="display:{{connected? 'flex':'none'}};">
        <view class="container-h bottom_bg" style="position: absolute;">
          <!-- <view style="flex: 0.5;"></view> -->
          <!-- 上锁 -->
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="1" /> -->
            <image src="{{selectedBtn === 1 ? '../../images/btn_lock_active.png' : '../../images/btn_lock.png'}}" class="btn_nor" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="1" />
          </view>
          <!-- 解锁 -->
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="2" /> -->
            <image src="{{selectedBtn === 2 ? '../../images/btn_unlock_active.png' : '../../images/btn_unlock.png'}}" class="btn_nor" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="2" />
          </view>
          <!-- 寻车 -->
          <view class="container-r btn_lay" style="display: {{is_kzb?'none':'flex'}};">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="3" /> -->
            <image src="{{selectedBtn === 3 ? '../../images/btn_call_active.png' : '../../images/btn_call.png'}}" class="btn_nor" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="3" />
          </view>
          <!-- 开坐包 -->
          <view class="container-r btn_lay" style="display: {{is_kzb?'flex':'none'}};">
            <image src="{{selectedBtn === 3 ? '../../images/btn_kzb_active.png' : '../../images/btn_kzb.png'}}" class="btn_nor" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="3" />
          </view>
          <!-- 静音 -->
          <view class="container-r btn_lay">
            <!-- <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="4" /> -->
            <image src="{{selectedBtn === 4 ? '../../images/btn_mute_active.png' : '../../images/btn_mute.png'}}" class="btn_nor" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="4" />
          </view>
          <!-- <view style="flex: 0.5;"></view> -->
        </view>
      </view>
      <!--  -->
      <view class="container-r" style="width: 100%;margin-top: 120rpx;">
        <view class="container-h bottom_bg" style="position: absolute;">
          <!-- <view style="flex: 0.5;"></view> -->
          <text class="btn_label" style="color: {{connected&&selectedBtn==1?'black':'gray'}};">上锁</text>
          <text class="btn_label" style="color: {{connected&&selectedBtn==2?'black':'gray'}};">解锁</text>
          <text class="btn_label" style="color: {{connected&&selectedBtn==3?'black':'gray'}};">{{is_kzb?'开坐包':'寻车'}}</text>
          <text class="btn_label" style="color: {{connected&&selectedBtn==4?'black':'gray'}};">静音</text>
          <!-- <view style="flex: 0.5;"></view> -->
        </view>
      </view>
    </view>
  </view>


  <!-- 白色背景 -->
  <!-- <view class="container-v bottom_bg" style="position:absolute;height: 100rpx;margin-top:1240rpx;margin-left: 2.5%;"></view> -->
</view>