<!--index.wxml-->
<view class="container">
  <!-- <view style="background:#14517E;width:100%;height:44rpx;"></view> -->
  <!-- 标题栏 -->
  <view class="container-h" style="background:white;width:100%;height:96rpx;align-items:center;">
    <image src="{{bluetoothAvailable? '../../images/ic_bluetooth_blue.png':'../../images/ic_bluetooth_red.png'}}" style="height:50rpx;margin-left:20rpx;" mode="heightFix"></image>
    <view style="flex:1;"></view>
    <image src="{{connected? '../../images/logo_red.png':'../../images/logo.png'}}" style="height: 35rpx;width: 46rpx;"></image>
    <text style="color:black;margin-left: 10rpx;">新大洲</text>
    <view style="flex:1;"></view>
    <image src="../../images/ic_scancode.png" style="height:50rpx;margin-right:20rpx;" mode="heightFix" bindtap="scanCode"></image>
    <image src="{{RSSI_Image}}" style="height:30rpx;margin-right:20rpx;display: none;" mode="heightFix"></image>
  </view>
  <!-- <view style="width:100%;height:{{topSpace}}rpx;"></view> -->
  <view class="container-r" style="width:100%;display: block;">
    <image src="../../images/ctrl_bg.png" style="position:absolute;width:100%;" mode="widthFix"></image>
    <!-- 感应开关状态指示图标 -->
    <image src="{{ganyingOn ? '../../images/ganying_on.png' : '../../images/ganying_off.png'}}" 
    style="position:absolute;width:174rpx;margin-left: 20rpx;margin-top: 100rpx;" 
    mode="widthFix" bindtap="onGanyingCheckChange"></image>
    <view class="container-v" style="width:100%;align-items: center;">
      <image src="../../images/img_moto_normal.png" style="position:absolute;width:70%;margin-top:80rpx;margin-left:100px;float: right;" mode="widthFix" bindtap="test">
      </image>
    </view>
    
    <!-- 调试不同连接状态下的UI -->
    <!-- <switch type="swtich" checked="{{connected}}" bindchange="testConnectionState">连接状态模拟</switch> -->
  </view>

  <!-- 启动按钮 -->
  <view class="container-r" style="margin-top: 800rpx;">
      <image src="{{connected? '../../images/btn_start_bg.png' : '../../images/btn_start_bg_disabled.png'}}" style="position: absolute;width: 96%;" mode="widthFix"
          bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="0"></image>
      <view class="container-h" style="position: absolute;align-items: center;"
          bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="0">
        <image src="{{connected && selectedBtn === 0 ? '../../images/btn_start_active.png':'../../images/btn_start.png'}}" style="width: 45rpx;height: 48rpx;"></image>
        <text style="margin-left: 30rpx;color: {{connected && selectedBtn === 0 ? 'red':'black'}};">START | 开启</text>
      </view>
  </view>

  <view class="container-v" style="margin-top: 180rpx;">
    <!-- 未连接设备时的4个功能按键 -->
    <view class="container-r" style="display:{{connected? 'none':'flex'}};">
      <view class="container-h" style="position: absolute;width: 100%;">
        <!-- <view style="flex: 0.5;"></view> -->
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"/>
          <image src="../../images/btn_lock_disabled.png" class="btn_nor" mode="heightFix"/>
        </view>
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"/>
          <image src="../../images/btn_unlock_disabled.png" class="btn_nor" mode="heightFix"/>
        </view>
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"/>
          <image src="../../images/{{isCall?'btn_call_disabled':'btn_open_disabled'}}.png" class="btn_nor" mode="heightFix"/>
        </view>
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"/>
          <image src="../../images/btn_mute_disabled.png" class="btn_nor" mode="heightFix"/>
        </view>
        <!-- <view style="flex: 0.5;"></view> -->
      </view>
    </view>
    <!-- 连接设备时的五个功能按键 -->
    <view class="container-r" style="display:{{connected? 'flex':'none'}};">
      <view class="container-h" style="position: absolute;width: 100%;">
        <!-- <view style="flex: 0.5;"></view> -->
        <!-- 上锁 -->
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"
          bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="1"/>
          <image src="{{selectedBtn === 1 ? '../../images/btn_lock_active.png' : '../../images/btn_lock.png'}}" 
          class="btn_nor"mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="1"/>
        </view>
        <!-- 解锁 -->
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"
          bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="2"/>
          <image src="{{selectedBtn === 2 ? '../../images/btn_unlock_active.png' : '../../images/btn_unlock.png'}}" 
          class="btn_nor" mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="2"/>
        </view>
        <!-- 寻车 -->
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"
          bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="3"/>
          <image wx:if="{{isCall}}" src="{{selectedBtn === 3 ? '../../images/btn_call_active.png' : '../../images/btn_call.png'}}" 
          class="btn_nor"mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="3"/>
          <image wx:else src="{{selectedBtn === 3 ? '../../images/btn_open_active.png' : '../../images/btn_open.png'}}" 
          class="btn_nor"mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="3"/>
        </view>
        <!-- 静音 -->
        <view class="container-r btn_lay">
          <image src="../../images/btn_bg.png" class="btn_bg" mode="heightFix"
          bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="4"/>
          <image src="{{selectedBtn === 4 ? '../../images/btn_mute_active.png' : '../../images/btn_mute.png'}}" 
          class="btn_nor"mode="heightFix" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd" data-btnindex="4"/>
        </view>
        <!-- <view style="flex: 0.5;"></view> -->
      </view>
    </view>
    <!--  -->
    <view class="container-r" style="width: 100%;margin-top: 100rpx;">
      <view class="container-h" style="width: 100%;position: absolute;">
        <!-- <view style="flex: 0.5;"></view> -->
        <text class="btn_label">上锁</text>
        <text class="btn_label">解锁</text>
        <text class="btn_label">{{isCall?'寻车':'开座包'}}</text>
        <text class="btn_label">静音</text>
        <!-- <view style="flex: 0.5;"></view> -->
      </view>
    </view>
  </view>
</view>